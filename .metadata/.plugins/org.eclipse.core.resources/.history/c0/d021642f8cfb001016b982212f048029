package tut02;

import java.util.Scanner;

public class Product {

    private String name;
    private double price;
    private double discount;   
    private int quantity;

    private static int productCount = 0;
    private static double totalRevenue = 0.0;
    private static double totalDiscount = 0.0;

    public Product(String name, double price, double discount, int quantity) {
        this.name = name;
        this.price = price;
        this.discount = discount;
        this.quantity = quantity;

        productCount++;
        updateTotals();
    }

    public Product(String name, double price, int quantity) {
        this(name, price, 0.0, quantity);
    }

    public Product() {
        productCount++;
    }

    private double getImportTax() {
        return price * 0.1;
    }

    private void updateTotals() {
        double discountedPrice = price * (1 - discount / 100);
        totalRevenue += discountedPrice * quantity;
        totalDiscount += discount;
    }

    public void input(Scanner sc) {
        System.out.print("Tên sản phẩm: ");
        name = sc.next();

        System.out.print("Giá sản phẩm: ");
        price = sc.nextDouble();

        System.out.print("Giảm giá (%): ");
        discount = sc.nextDouble();

        System.out.print("Số lượng: ");
        quantity = sc.nextInt();

        updateTotals();
    }

    public void displayInfo() {
        System.out.println("Product: " + name);
        System.out.printf("Price: $%.2f%n", price);
        System.out.printf("Discount: %.0f%%%n", discount);
        System.out.println("Quantity: " + quantity);
        System.out.printf("Import Tax: $%.2f%n", getImportTax());
        System.out.println();
    }

    public void updateQuantity(int newQuantity) {
        double oldRevenue = price * (1 - discount / 100) * quantity;
        double newRevenue = price * (1 - discount / 100) * newQuantity;

        totalRevenue = totalRevenue - oldRevenue + newRevenue;
        quantity = newQuantity;
    }

    public static int getProductCount() {
        return productCount;
    }

    public static double getTotalRevenue() {
        return totalRevenue;
    }

    public static double getAverageDiscount() {
        if (productCount == 0) return 0;
        return totalDiscount / productCount;
    }

    public static void displayStatistics() {
        System.out.println("=== Product Statistics ===");
        System.out.println("Total Products Created: " + productCount);
        System.out.printf("Total Potential Revenue: $%.2f%n", totalRevenue);
        System.out.printf("Average Discount: %.2f%%%n", getAverageDiscount());
    }
}
